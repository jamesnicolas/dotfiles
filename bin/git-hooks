#!/bin/bash

HOOKS=~/.git/hooks
WORKSPACE=~/workspace

# Symlink each hook into each project in the workspace.
for hook in $(ls ~/.git/hooks/); do
	src="${HOOKS}/${hook}"

	for project in $(ls ~/workspace/); do
		dst="${WORKSPACE}/${project}/.git/hooks/${hook}"

		# Make sure we don't clobber someone's hooks.
		if [[ -e "${dst}" ]]; then
			target="$(readlink "${dst}")"

			if [[ "${target}" != "${src}" ]]; then
				echo "Not overwriting: ${dst}"
			fi
		else
			ln -s "${src}" "${dst}"
		fi
	done
done
